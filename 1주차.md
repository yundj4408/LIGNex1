# 1주차

순항미사일 : 비행 중 속도와 고도를 거의 바꾸지 않고 날아가는 미사일이다.

로켓의 시작

- 13세기 금나라, 화창이라는 무기에서 아이디어를 얻어 만듬
- 비화창(화창의 화약 대나무통을 거꾸로 매달아놓은 듯한 무기)이 인류 최초의 로켓이다. 
  비화창은 13세기 무렵 금나라가 몽골의 공격을 막기 위해 사용했으며,, 몽골도 비화창 기술을 얻어 유럽 정복 당시 썻고, 그 결과 유럽에도 화약과 함께 로켓 기술이 전래된다.  57page



미사일 속 유도장치 

- CPU 이외에 FPGA 칩을 함께 사용한다. 
- 유도조종장치에는 신호의 입출력을 전담하는 회로기판이 따로 들어가는 경우가 많다. 
- RTOS사용



현대의 미사일 중 상당수는 중간까지는 다른 유도 방식을 쓰더라도 최종 단계에서는 호밍유도 방식을 쓴다. 235page

 

### 1. 미사일의 역사

- **현대 미사일의 시초 V1**

  현대적인 미사일의 시초는 독일이 제2차 세계대전 기간 개발한 V1과 V2라 할 수 있다. 

  그 당시 독일이 만든 V1 미사일은 명중률이 매우 낮아 정밀 공격을 할 수는 없었다.

  경제적인 면에서 V1의 생산단가는 보통 폭격기와 비교하면 1/30 수준에 불과했고, 인명손실은 제로, 연료소모는 1/8에 불과했다.

  대전기 전략폭격개념은 명중율의 미비를 집중적인 화력투사로 극복한다는 것이므로 폭격기로 폭탄 1톤을 도시에 대충이라도 떨어뜨리기 위해서 희생시켜야 할 항공기의 숫자를 생각하면 V1이야말로 당시로서는 가장 싼 값에 가장 많은 폭발물을 도시에 투하할 수 있는 수단이었다. 

  하지만 V1이 기대했던 성과를 거두지 못한 이유는 최대속도가 640km/h로 쉽게 방어할 수 있었다. 

  명중률을 높이기 위해 사람이 타고 조종하는 자폭병기로 만들려 했지만, 아돌프 히틀러가 인도적이지 않다고 제지하였다.(일본은 이걸;;)
  
- **세계 최초의 탄도 로켓 V2**

  V2 로켓은 유도 장치가 없는, 액체 산소를 연료로 사용하는 길이 14m쯤 되는 단순한 대형 로켓 추진체였다

  V1과 달리 V2는  초속 1,600m(마하 5)라는 가공할 속도였기 때문에 당시의 기술로는 요격이 전혀 불가능했다.
  그러나 개발 및 양산과정에서 상당한 문제가 일어났다. 탄도탄이라는 분야를 최초로 개척한 것 때문에 정밀한 유도장치의 개발에 문제가 발생했다. 

- **세계 2차 대전 이후, 유도탄의 시작**V1 로켓은 펄스 제트를 추진 동력으로 하는 무인 비행기식 미사일로 오늘날 순항 미사일(cruise missile)의 전신이고, V2 로켓은 탄도 미사일(ballistic missile)의 원조라고 할 수 있다.

  로켓은 펄스 제트를 추진 동력으로 하는 무인 비행기식 미사일로 오늘날 순항 미사일(cruise missile)의 전신이고, V2 로켓은 탄도 미사일(ballistic missile)의 원조라고 할 수 있다.

- 제2차 세계 대전 이후, 장거리의 적을 공격할 수 있는 병기로써의 유도탄이 속속 등장했다. 항공전에서 적의 꼬리를 잡지 않고도 공격 가능한 공대공유도탄, 적 함의 사정거리 밖에서 함정을 공격할 수 있는 함대함유도탄, 포병보다 장거리에서 적 진영을 타격 가능한 지대지유도탄, 그리고 대양을 사이에 두고서도 폭격이 가능한 대륙간탄도유도탄 등 많은 형태의 유도탄이 출현하게 된다.

  2차 세계대전이 끝난 뒤 구소련과 미국은 V-2 로켓 기술을 바탕으로 대륙간탄도미사일(Intercontinental Ballistic Missile: ICBM)을 개발하기 위해 연구에 몰두했다. **대륙간탄도미사일은 사거리가 5,500 km 또는 3,500 마일 이상인 탄도 미사일로, 주로 핵탄두를 탑재하기 위하여 개발되는** **것**을 말한다. 기본적으로 V-2보다 17배나 더 멀리 날아갈 수 있는 성능을 지녔으며, 무게 3톤의 핵폭탄을 싣고 5,500km 이상을 날아갈 수 있는 성능의 미사일이다. 이 경주에서 구소련은 미국보다 앞서 나가기 시작했다.

- **탄도 미사일의 구동 방식**
  탄도 미사일의 구동 방식탄도 미사일의 비행 진로는 3단계로 나뉜다. 발사(boost) 단계로 불리는 1단계는 로켓 엔진이 미사일을 특정 탄도 궤도에 올려 놓기 위해 필요한 만큼 추진한다. 그런 다음 탄두를 실은 미사일 끝 부분이 지구 대기권 밖에서 2단계인 미드 코스(mid-course) 비행을 한다. 최종 단계에서는 지구 중력이 탄두를 대기권으로 다시 끌어당겨 목표 지점으로 떨어뜨린다.





### 2. 미사일의 유도 방식

미사일은 첫째, 자체 추진력을 갖고 있으며 둘째, 유도기능이 있다.

유도(Guidance)란 미사일이 목표물에 명중하는 방법입니다. 흔히 유도기 능이 있는 미사일이라고 하면 왠지 움직이는 표적을 쫓아가는 것을 먼저 떠올리게 되지만, 미사일의 목표물은 적 전투기나 차량, 선박일 수 있고 고 정되어 있는 건물이나 기타 시설물일 수도 있습니다. 미사일이 택하는 유 도방식은 여러 가지가 있는데, 이는 표적의 종류나 미사일에 달린 센서의 종류, 혹은 미사일의 사거리나 심지어 기술 수준이나 비용 등 다양한 요인 에 의하여 결정됩니다. 또한 한 가지 미사일이 두세 가지 유도방식을 혼합 하여 사용하기도 합니다. 대표적인 유도방식으로는 **항법유도, 지령유도, 그리고 호밍유도**가 있습니다. 



- #### **항법유도**

  항법유도는 배나 비행기가 정해진 목적지를 향해 항법을 이용하여 정확히 찾아가듯, **미사일이 항법장치를 이용해 정확히 표적을 향해 날아 가는 유도방식**을 말합니다. 항법유도를 사용하는 미사일에는 일반적으로 표적의 좌표 정보가 입력됩니다. 그러면 미사일은 항법장치를 통하여 자 신의 위치를 파악하고, 유도장치는 자신의 위치 및 표적의 위치를 참고하 여 일정한 비행경로에 따라 표적에 도달하도록 미사일을 조종합니다. 미 사일 종류에 따라 이러한 비행 경로는 스스로 정하기도 하며, 사람이 직접 특정한 패턴으로 날아가라고 경로점을 지정해주기도 합니다.


  아무리 정확한 지도가 들어있고, 목적지의 정확한 좌표를 알아도 정작 자신이 정확히 어디에 있는지 모른다면 어느 방향, 어느 길로 가야 할지 알 수가 없기 때문입니다. 항법유도를 사용하는 미사일도 마찬가지입니다. 항법유도 방식은 정해진 표적을 쫓아간다기보다는, 정해진 좌표를 향해 날아가는 것이므로 일반적으로 고정되어 있는 지상표적을 공격하는 용도로 쓰입니다. 하지만 다음 시간에 설명드릴 지령유도와 조합하여 이 동하는 표적을 공격하는 것도 가능합니다. 

  - 관성항법유도
    관성력을 이용하여 미사일의 가속도 등의 측정을 통해 현재 미사일의 위치를 찾아내는 것입니다. 관성항법유도 방식의 미사일 안에는 관성력 측정장치(IMU, Inertial Measurement Unit)란 것이 들어있는데, 이 안에는 다시 가속도 측정센서와 자이로스코프 센서가 들어있습니다.

    관성항법유도 방식은 미사일이 정해진 좌표를 따라 움직이는 방식이므로 이동하는 표적을 맞출 수 없습니다.

    문제는 관성 항법유도가 경과한 시간에 맞춰서 계속 이동한 거리와 움직인 자세를 더 해서 현재의 위치와 자세를 찾는 방식이다 보니 아주 약간의 오차도 누적 되어 큰 오차가 되어버립니다. 
    
  - 

- #### **지령유도**

  지령(Command)유도는 스스로 표적을 향해 어떻게 날아갈지 결정하지 못하고, 오직 지령에 따라 움직이기만 하는 방식을 말합니다.
   미사일 자체에 복잡한 컴퓨터가 필요없고, 항법장치나 적을 찾기위한 탐지장치도 필요없이 오직 외부에서 보내오는 지령을 받아들이는 안테나(혹은유선케이블)만 있으면 됩니다. 1회용인 미사일에 비싸고 복잡한 유도관련 전자장치를 넣지않아도 된다는점에서 유용한 방식입니다

  항법유도방식은 고정된 표적만 공격할 수있는데 비해 지령유도방식은 움직이는 표적을 맞출 수있습니다.
  다만 이방식은 미사일이 표적에 명중하는 그순간까지 계속 지령을 내려줘야만 제대로된 명중률이 나온다는 단점이있으므로, 지평선 너머처럼 표적이 제대로 보이지 않는곳에 있는 표적에 대해서는 쓰기 어렵습니다.

  지령유도에도 비시선지령유도, 시선지령유도, 빔 라이딩 방식으로 나뉩니다.

  - **비시선지령유도**

    이방식은 컴퓨터를 이용하는 더욱 자동화된방식이므로 사람이 직접 미사일을 조작하는 수동지령유도방식보다는 더높은 명중률을 갖습니다. 즉 사람이 하던 원격조종을 컴퓨터가 하는 셈입니다. 특히 1950년대 지대공 미사일이 본격적으로 등장하던 시절에는 전자회로에 무겁고 크며 비싼 진공관을 쓰던때라 움직이는 표적을 맞출 수있으면서도 미사일에 전자회로를 적게 넣어도 되는 비시선지령유도방식을 사용하는 미사일이 많이 등장하였습니다.
    그런데 미사일 외부에 있는 컴퓨터가 미사일을 조종하여 표적을 맞추려면 표적의 위치뿐만아니라 미사일의 위치도 정확히 알아야합니다. 그래서 비시선 지령유도 방식 미사일은 대부분 두개의 레이더가 필요합니다.

    하나는 표적의 위치를 찾는 용도이며, 하나는 발사한 미사일의 위치를 찾는 용도입니다. 그렇기에 비시선 지령유도 방식을 쓰려면 지나치게 많은 레이더 장비가 필요하다는 단점이 있습니다. 또한 지상・선박의 레이더로부터 멀리있는 표적과, 그 표적을 쫓아가기위해 마찬가지로 먼거리로 날아가있는 미사일을 레이더로 측정하다보면 그 측정 오차가 심해지는 단점이 있습니다.
  
- **시선지령유도**
  
  시선지령유도는 표적을 추적중인 레이더의 시선(Line of Sight) 안에 미사일이 오도록 미사일을 유도하는 방식입니다. 무조건 미사일이 표적을 추적중인 레이더의 시선안에 머물게되므로 미사일이 계속비행하면 결국 표적에 맞게되는 방식입니다.
    비시선지령유도방식과 달리 이방식은 미사일을 추적하기 위한, 이를테면 별도의 레이더같은 복잡한 장치가 필요없는것이 장점입니다. 이를테면 표적을 추적하기 위한 레이더는 표적을 추적하기 위한 전파와 미사일을 추적하기 위한 전파를 아주 짧은시간동안 번갈아가며 내보내서 표적과 미사일을 동시에 추적할 수있습니다. 물론 꼭 전파로만 미사일의 위치를 파악할 필요는 없으며, 실제로 일부 미사일은 꼬리에 달린 일종의 섬광탄으로 자신의 위치를 알리기도 합니다. 이경우에는 미사일의 위치를 확인하는 센서 역시 전파를 사용하는것이 아니라 적외선센서같은것을 사용해야합니다. 또, 시선지령유도방식의 변형으로 반능동 시선지령유도 방식이 있습니다.
  
  일반적인 시선지령 유도방식미사일은 컴퓨터가 자동으로 레이더를 표적에 조준하지만, 이방식은 사람이 직접 표적을 조준합니다. 이러한 방식중 유명한 미사일이 BGM-71 토우(TOW) 대전차미사일입니다. 이 미사일을 운용하는 보병은 표적인 전차를 조준기로 계속 조준합니다. 만약 전차가 움직이면 지속적으로 조준경 한가운데 전차가 오도록 조준기를 조작합니다. 이후 미사일을 발사하면 미사일의 꼬리에서는 별도의 적외선신호를 내보내는 발광기가 작동합니다. 그리고 토우미사일의 조준기에는 적외선센서가 달려있으며, 이것으로 미사일의 위치를 확인합니다. 그리고 조준기는 자신의 시선 한가운데에 오도록 미사일을 유도하는 방식입니다.
  
  - **빔 라이딩 방식**

    빔 라이딩 방식은 지상의 조준장치가 표적을 향해쏜 전파빔, 혹은 레이저빔을 타고 가는 것 같다고 하여붙은 이름입니다.
  이 방식은 시선 지령유도 방식의 변종이지만 엄밀히 말하자면 외부로부터 지령을 받지 않습니다.
  
    지상・선박의 조준기는 표적을 조준하는 한편 표적 방향으로 레이저, 혹은 전파로 된 빔을 쏘아 보냅니다. 미사일의 꼬리부분에는 이 빔을 수신하는 센서가 들어있으며 이 센서를 통하여 미사일이 빔으로부터 얼마나 벗어나있는지 확인합니다. 그리고는 미사일이 스스로 빔 한가운데 오도록 움직입니다.

    표적을 향해 쏘아 보내는 빔의 폭은 아무리 좁게 만들어도 거리가 멀수록 폭이 넓어지는 특성이 있기 때문에먼 거리의 표적을 상대할 경우에는 명중률이 떨어지는문제가 있습니다.
  
- #### 호밍유도

  호밍(Homing)은 본래 귀소, 즉 ‘집을찾아간다’라는 뜻이지만, 미사일의 유도방식에서는 미사일이 직접 표적을 찾아가는것을 뜻합니다. 아마 보통 사람들이 ‘미사일’이란 단어를 들으면 가장 먼저 떠올리는 이미지가 바로 이 호밍유도방식일 것입니다.

  호밍유도방식 미사일은 탐색기(Seeker)라는, 사람으로 치면 눈과 귀에 해당하는 장치가 달려있어 미사일이 직접 표적을 찾아 날아갑니다. 가장 큰 장점은 미사일이 표적에 가까이 다가갈수록 더 정확히 표적의 위치를 알 수있다는 점입니다. 이 호밍유도방식은 탐색기의 형태에 따라 크게수동, 반능동, 능동방식으로 나뉩니다.

  - **수동 호밍유도**

    수동(Passive)유도방식의 미사일은 정말 사람의 눈, 귀와 같은 탐색기를 가진 미사일입니다. 여기서 수동이란 미사일이 자체적으로 어떠한 신호도 내보내지 않고 오직 표적에서 나오는 신호만을 이용한다는 의미입니다.

    이를테면 전투기는 엔진에서 열기가 나오고, 고속비행시 공기마찰에 의해 열이 발생합니다. 이 열은 적외선형태로 주변에 퍼지는데 미사일의 적외선탐색기는 이 신호를 탐지하여 표적을 찾는 방식입니다. 적외선이 아니라 TV 카메라를 사용하는 경우도 있는데, 미사일이 카메라영상에 찍힌 표적을 보고 스스로 찾아가는 것입니다.
    

    

    

    적이 신호를 내보내지 않거나 내보내는 신호가 약하면 추적이 어렵다는 단점이 있으며, 표적이 어느 방향에 있는 지는 알 수 있지만 직접 거리를 측정할 수 없다는 단점이 있습니다.

  - **반능동 호밍유도**

    반능동(Semi-Active) 방식은 밑에 설명할 능동유도 방식과 수동유도 방식을 합친 듯한 형태입니다.

    반능동유도 방식 미사일은 미사일 자체는 수동유도 방식과 마찬가지로 외부 신호를 받아들이는 장치만 가지고 있습니다. 그러나 반능동 방식은 수동유도와 달리 미사일 외부, 즉 미사일을 발사한 지상 레이더나 전투함, 혹은 전투기가 표적에게 특정한 레이더 전파를 쏘아 보낸다는 점이 다릅니다.


     이 전파는 단순히 표적의 위치나 거리를 측정하기 위한 전파가 아니라 순수하게 표적을 조준하기 위한 신호로, 일반적으로 전파를 연속적으로 계속 내보내는 연속파(CW, Continuous Wave)를 내보냅니다. 전파는 표적에 닿으면 반사되기 마련인데, 반능동유도 방식 미사일은 바로 이 반사되는 전파를 쫓아가게 됩니다.
    
    한편 레이더가 아니라 레이저를 이용한 유도 방식도 반능동유도 방식입니다. 게임‘스타크래프트’에서 유령(고스트)이 일정 지역에 레이저를 조준하고 있으면그 지점에 핵이 떨어지는데, 이것이 바로 레이저 유도방식입니다. 미사일이 직접 레이저를 쏘거나 하진 않지만, 아군이 레이저를 표적에 비추고 있으면 그 표적에서반사되어 보이는 레이저를 쫓아 미사일이 날아갑니다.


​    

    반능동 방식은 수동 방식과 달리 아군이 원할 때 원하는 강도로 신호를 내보낼 수 있으므로 더 먼 거리의 표적도 정확히 맞출 수 있습니다. 또한 레이저 유도 방식의 경우 아군이 지원요청을 하는데 유리합니다. 
    
    (단점)
    
    반능동유도 방식은 수동유도 방식과 달리 적이 아군의 미사일 유도를 위한 특별한 전파나 레이저를, 센서를 이용하여 역으로 감지하여 자신이 공격받고 있다는 사실을 눈치챌 수 있어서 기습 효과가 떨어집니다. 또한 전파나 레이저를 표적에 비추는 쪽은 미사일이 명중할 때까지 유도를 멈추고 도망칠 수 없다는 단점이 있습니다. 

  - **능동 호밍유도**

    능동유도란 미사일이 스스로 신호를 내보내고, 그신호를 이용하여 표적을 찾는 방식을 말합니다.

    대부분의 능동유도 미사일은 레이더 전파를 사용합니다. 이 방식의 최대 장점은 미사일이 스스로 전파를 내보내므로 수동방식과 달리 표적 상태에 따라 신호가 약해지거나 할 염려가 없습니다. 게다가 능동유도 방식은 미사일 자신이 전파를 내보내서, 그 전파가 되돌아온

    

    시간을 계산하면 표적에 대한 방향 뿐만 아니라 거리도 정확히 측정할 수 있으므로 좀 더 정확히 표적을 향해 날아갈 수 있습니다. 그럼에도 능동유도 방식은 반능동유도 방식과 달리 아군이 미사일이 명중할 때까지 전파나 레이저를 비추고 있을 필요가 없습니다.
    이러한 장점들에도 불구하고 미사일이 스스로 전파신호를 내보내게 하려면 복잡한 전파 관련 장비가 추가되어야 하기에 부피도 늘어나고, 무게도 늘어나며, 결정적으로 가격도 비싸집니다. 다만 최근에는 기술의 발전으로 전자장비가 가벼워지고 부피도 줄었으며, 값도 싸지는 추세이다 보니 능동유도 방식을 택하는 미사일이 점점 늘어나고 있습니다. 


    게다가 지상이나 항공기에 탑재된 큰 레이더와 달리 미사일에 탑재할 수 있는 레이더는 안테나 크기에 제약이 있다 보니 미사일 자체의 레이더로는 표적을 탐지할 수 있는 거리가 길어봐야 **10km전후**입니다. 그래서 보통 능동유도 방식 미사일은 마지막 단계에서만 능동유도를 사용하며, 중간 단계에서는 다른 유도 방식을 사용하여 표적을 향해 날아갑니다.


​    

    #### 현대 미사일은 복합유도 방식을 사용한다. (복합유도란 여러가지 유도방식)
    
    AIM-120은 예상 표적위치 근처까지 관성항법으로 날아간 뒤, 자신의 레이더를 켜고 전방을 살펴서 더 정확히 표적을 추적하여 능동유도 모드로 전환합니다. 문제는 적기가 일직선으로 날아간다는 보장이 없다는 점입니다. AIM-120이 발사된 직후 적기가 급격하게 방향을 틀거나 속도를 바꿀 경우, 적기는 AIM-120이 적기가 있을 것으로 예상하고 자체 레이더를 켠 위치에서크게 벗어날 수 있습니다. 그래서 AIM-120의 꼬리 부분에는 작은 안테나가 달려있으며, 만약 AIM-120을 발사한 전투기가 적기를 계속 레이더로 추적하고 있다면 그정보는 AIM-120에게도 전송됩니다. 또한 AIM-120의자체 레이더가 켜질 때까지 이 적기에 대한 정보는 계속 업데이트 됩니다. 만약 중간에 적기가 방향 등을 바꾸면 AIM-120은 그 바뀐 정보를 토대로 다시 비행경로를 짜서 관성항법으로 날아갑니다. 이러한 정보 전송은 전투기가 직접 AIM-120에게 ‘이리 움직여라, 저리 움직여라’는 식으로 지령을 내리는 것은 아니지만 일종의 지령유도 방식에 해당하는 셈입니다.
    
    이처럼 미사일은 표적의 종류에 따라, 미사일의 특성에 따라, 사용 가능한 예산에 따라 여러 가지 유도방식을 사용합니다.



### 3. 미사일 제어 기법 (지대공 미사일)

- 제어(control)란 물리현상 또는 장치를 인간이 원하는 대로 이루어지도록 조작하는 것을 말한다. 생활주변의 예를 들어, 어두우면 스위치 조작을 통하여 전등을 켜야 하며 밝기를 조절할 수 있어야 하고, 추우면 실내온도를 높여야 하며, 건조하면 습도를 조절하여야 한다. 또한 이동을 위하여 자전거, 자동차, 비행기 등을 제어하여 가고 싶은 곳으로 이동하여야 한다.

- 제어중에서도 자동제어 (automatic control)라 함은 수동제어에 대비되는 말로, 앞에서 언급한 가감 조절의 동작을 사람이 직접하지 않고 특별히 고안된 장치 또는 기기를 이용하는 것을 뜻한다.



- 자동제어의 현상을 공업에 적극 이용한 최초의 시도는 1788년 J.Watt가 증기기관의 속도조절을 위하여 원심적 조속기를 사용한 것을 자동제어의 시초로 본다. 이 증기기관 속도제어계의 특징으로는 '자동적', '피드백 원리가 사용되었다.', '어떤 물리량(여기서는 회전속도)을 일정한 유지한다.'등을 들을수 있다. 
- 발전소에서 생산한 전력의 전압과 주파수를 일정하게 유지하거나 항공기나 선박의 침로를 일정하게 유지하게 하는 이러한 제어계를 **조절계**라고 한다.

- 자동제어의 또다른 하나의 목적은 제어량을 기준량(명령 또는 목표량)에 추종하도록 하는 것이다. 이를 **추종제어계**라고 한다.
  추종제어 : 미지의 임의 시간적 변화를 하는 목표값에 따라 변화



발전

- 위에서 언급한 J.Watt가 증기기관의 조속기 피드백 제어계가 쉽게 불안정하게 되는 상황, 즉 조속기와 증기기관 사이의 상호 간섭작용을 규명하지는 못하였다.
- 이 상호간섭 작용을 규명하기 위해 Routh-Hurwitz 안정 판별법이 개발되었고,
- 이후 PID 제어 및 여러 제어 방법이 고안되었다.
- 제어는 고전제어와 현대제어로 나뉜다.
- 고전제어
  - 고전제어에서의 대표적인 제어기 구조는 PID제어기 및 진지상 보상기(lead-lag compensator)가 많이 사용되었다. 
  - 고전 제어 이론은 단일 입력, 단일 출력 시스템에서만 사용가능
- 현대제어
  - 고전제어는 시스템의 모든 상태를 측정할 수 없는 관계로 입출력 관계로부터 상태를 추정할 필요가 생기게 되었다.
  - 1960년대에 이르러 우주선제어와 항공기 제어등의 필요성에 따라 최대원리를 적용한 최단시간제어 또는 성능사양의 표현으로 2차형식의 평가함수를 최소로 하는 최적제어 (LG 또는 LQG제어) 등이 연구가 되었다.
  - 고전제어에서는 주파수 응답이였다면 현대제어에서는 상태방정식을 도입하고 제어대상도 다입력 다출력계를 취급했다.



### 4. 칼만 필터

-----------

우리는 왜 칼만필터를 사용해야하는가?

- 예를 들어 외국 친구가 우리나라를 방문해서 내가 픽업하러 공항까지 가야되는 상황이 있으면, 차에 있는 네비게이션을 따라간다.
  Onboard Sensor(내 위치를 찾고 네비게이션 해주는데 도와주는 센서)

  - IMU(Inertial Measure Unit) - 가속도계, 자이로스코프를 사용하여 차의 속도와 각속도를 측정
  - Odometer - 자전거 또는 자동차와 같은 차량이 이동 한 거리를 측정
  - GPS receiver - 위성으로부터 신호를 받아 차의 위치를 추정

  차가 터널을 지나가게 된다면 GPS신호가 매우 낮아진다. 그래서 위치를 찾기 힘들어 진다. 

  - 이때 IMU를 믿을 수 있나? 
    아니다, IMU는 가속도를 측정하는데 차의 위치를 판단하기에는 어렵다. 
    그래서 가속도를 두번 적분하여 거리를 받아낸다. 
    하지만 이 작업은 시간이 지남에 따라 누적되는 작은 오류로 인해 표류하기 쉽습니다.
  - 그래서 IMU와 Odometer를 같이 사용하게 된다면 위치를 더 정확하게 예측할수 있을것이다. 
    하지만 Odometer또한 타이어의 압력과 도로의 상태에 따라 영향을 받을수 있다.
    - 결과적으로 IMU와 Odometer는 차의 상대적인 위치를 알려주면서 빠르게 업데이트가 되지만, 쉽게 표류되고
      GPS 같은 경우에는 절대적인 위치를 알려주면서 느리게 업데이트해준다. 그리고 노이즈가 낄수 있다.  

**칼만 필터가 3개의 센서를 융합하여 차의 위치에 대한 최적의 추정을 할 수 있게 만들어 준다.**

----------------

칼만 필터란?

- Rudolf E. Kalman (1930-2016)에 이름을 땄다.
- Optimal estimation algorithm (최적 추정 알고리즘)
- 응용 분야로는 guidance and navigation systems, computer vision system, and signal processing 
- 최초로 Apollo project에서 유인 우주선의 달까지의 궤도를 추정하는데  Kalman Filter가 활용 되었다.

----------------------

칼만 필터 **State Observers**

- 예를 들어, 두 사람이 있고, 티미라는 친구가 있다. 티미의 현재 느끼고 있는 감정에 대해 알고 싶다. 

  - 하지만 direct로 그 사람의 감정을 알 방법은 없다. 
  - 그래서 쿠키를 줘서 그의 표정 변화를 관찰한다. 
  - 이 관찰 방법은 그의 진짜 mood를 알수 있게 해준다. 
  - State Obversation 자체가 자기가 볼수 없는 것이거나 측정할 수 없는것을 추정하는데 도움을 준다. 

- ^x의 의미는 state observer를 통해 이미 추정이 된 state라고 생각하면 된다. (estimated state)

- 예를 들어, 우주선이 지구에서 화성까지 안전하게 가기 위해선, jet engine의 내부 온도를 잘 알고 있어야 한다. 

  - 내부 온도가 너무 뜨거우면 우주선 부품에 데미지를 줄 것이다.
  - 현재로써 우주선의 내부 온도를 측정할 방법이 없다. 왜냐하면 센서를 그 안에다가 넣게 되면 녹기 때문이다.
  - 그래서 우주선 바깥속에 센서를 달아서 온도를 측정한다.

  ![KalmanFilter](.\Pictures\KalmanFilter.PNG)

  - 우주선의 내부 온도를 컨트롤하기 위해 연료 흐름량을 조절해야 할것이다. 하지만 Tin State를 추정할 수 없으니 우리에게 주어진 연료 흐름량과 외부 온도의 정보를 통해 조절한다. 
  - 실제 시스템의 Mathematical Model에 Input으로도 Wfuel를 사용하여 Estimated Tex를 구한다. 
  - 우리는 지배 방정식을 알고 있기 때문에 Estimated Tin도 구할 수 있다. 
  - Estimated Tin만 안다고 끝나는 것이 아니다. Estimated Tin은 현실 시스템의 근사치이기 때문에 Tin이 Estimated Tin과 같다고 볼 수 없다. 불확실하다.
  - 만약 모델이 불확실성 없이 perfect하고 현실 시스템과 모델이 같은 조건이면 Text와 Estimated Text가 같을거다.
  - 위와 같은 상황은 현실 세계에서 일어나지 않는다.
  - 우리의 goal은 Text와 Estimated Text를 match 하는 것이다. 두 개의 값이 같아지면 이 모델은 현실 시스템과 수렴할 것이다.
  - 이 모델이 현실 시스템과 수렴하게 되면 Tin값이 Estimated Tin과 같아질 것이다. 
  - 그래서 우리가 할려고 하는 것은 Tex와 Estimated Tex 값의 차이를 최소화하는 것이다. 
  - ![KalmanFilter식](.\Pictures\KalmanFilter식.PNG)
  - ![KalmanFilter2](C:\Users\user\Desktop\LIG넥스원\Pictures\KalmanFilter식2.PNG)
    K Gain이 없더라도 지수함수는 감소하는 형태이지만, K Gain이 중요한 이유는 K Gain를 통해 error function의 감소 비율을 조절할 수 있고, 에러를 좀 더 빨리 제거할 수 있다. 
  - 이득 K를 선택하는 최적의 방법은 Kalman 필터를 사용하여 수행된다. 

----------------------

**Optimal State Estimator**

- 예를 들어  GPS 센서를 통해 출발지점으로 부터 1km에 딱 도착하는 자율주행자동차를 만드는 대회가 있다고 하자.

- 100개의 지형이 있는데, 각각 결승선에 가장 가깝게 멈춰야 했다. 

- 평균 final position를 구하여 결승선에 가장 가깝게 멈춘 팀이 우승을 한다. (zero bias + mininum variance)

- GPS 센서만 사용하기에는 노이즈가 많기 때문에 Kalman Filter를 사용하여 해결!

- ![RandomNoise](.\Pictures\RandomNoise.PNG)

  - yk가 1km가 딱 되도록 만들고 싶지만 GPS 신호가 noisy하다. 
  - ![RandomNoise](.\Pictures\gaussianDistribution.PNG)

  - Vk는 measurement noise이고, Wk는 process noise이다. 둘 다 패턴들 가지지 않는 random variable이지만 확률 이론을 사용하여 둘의 평균 특성을 알 수 있다.  
    - 예를 들어 Vk가 Gaussian distribution, zero mean, covariance R -> N(0,R)로 그려지면 noise는 거의 0에 가깝게 있고 소수의 값들이 0에 조금 멀어 있을 것이다. 현재 single output이기 때문에 공분산 R은 스칼라이고 measurement noise 변화와 같다. 
    - measurement자체가 noisy한 것을 알고 있으니 우리가 측정하는 것이 올바른 결과가 나오는 것에 영향을 주지 않을 것이다. 
    - car model에 대해서 우리가 알고 있다면 input를 그 모델에다가 넣어서 위치를 estimate할 수 있다. 
    - 하지만 이것또한 정확하지 않다. 왜냐하면 Xk에 random variable인 Wk가 들어가 있기 때문이다. 다시보기 
    - 그래서 Kalman Filter가 사용된다. 
      ![CarModel](.\Pictures\CarModel.PNG)
    - ![OpticalStateEstimation](C:\Users\user\Desktop\LIG넥스원\Pictures\OpticalStateEstimation.PNG)
      - 확률밀도함수를 사용 ? 
      - Estimated Xk값이 Xk-1의 불확실성보다 넓어진 이유는 움푹 패진 지형에서 움직이거나 바퀴가 미끄러졌을수도 있기 때문이다. 
      - 모델을 통해 predict한 거리는 다를 수 있다. 
      - measurement Yk에서 variance는 noisy measurement의 불확실성이다. 
      - 그래서 true position은 평균 근처 어느곳일거다. 
      - Prediction과 Measurement를 통해 가장 best estimate할 수 있는 방법은 measurement와 predicted state estimate의 확률 함수를 곱하는 것이다. 
      - 곱하게 된다면 추정값의 variance가 measurement와 predicted state estimate보다 더 작은 값을 가지게 된다. 그리고 그 확률 밀도 함수의 평균값이 optimal estimation of the 차 위치.

--------------















```
전통적으로 미사일 자동 조종 장치는 가속도나 각속도 궤환 루프에 PID 제어기를 이용하여 설계되었다. 미사일이 비행하는 모든 영역에서의 성능을 만족시키기 위하여 일반적으로 게인 스케줄링 방법이 사용된다. 게인 스케줄링 방법은 스케줄링 변수에 의해서 정해진 몇 개의 평형 상태에서 선형화된 모델을 사용하여 PID 게인을 설정한 후, 평형 상태들 사이의 구간에서는 설정된 게인을 적절히 조합하는 방법이다. 그러나 이러한 게인 스케줄링 방법은 시간이 많이 요구되고 평형 상태들 사이의 구간에서는 만족할만한 성능을 보장하지 않는다. 특히 고기동 미사일처럼 상태 변수가 빠르게 변하거나 비선형성을 나타내는 시스템에서는 좋은 성능을 얻기 힘들다. 



선형 제어의 단점을 보완하기 위해 사용되는 비선형 제어 기법 중 하나인 모델 역변환 기법은 비선형 시스템을 선형 시스템으로 변환시켜준다. 따라서, 비선형 시스템에 선형 제어 기법을 사용할 수 있게 해 주지만, 비최소위상이 발생하는 시스템에 직접 적용할 수 없는 단점이 있다. 출력 재정의 기법은 비최소위상 시스템을 최소위상 시스템으로 변환시켜 이러한 문제를 해결한다. 출력 재정의 기법은 실제 출력을 직접적으로 재정의하는 직접적인 기법과 다른 변수로 변환시킨 후 재정의하는 간접적인 기법으로 시스템에 적용될 수 있다. 또한 비선형 제어 기법은 정확한 모델과 공력 데이터를 요구하기 때문에 비선형성이 심하고 비대칭 와류로 인한 큰 모멘트가 외란으로 존재하는 고앙각 영역에서는 만족할 만한 성능을 얻기 힘들다. 따라서, 모델 불확정성을 보충해주고 외란에 강건한 시스템을 설계하기 위해서는 PID 제어나 실시간 신경망 제어, 슬라이딩 모드 제어 같은 방법들과 같이 사용되어야만 한다. 출력 재정의 기법을 통해 제안된 자동 조종 장치들의 성능을 수치 시뮬레이션을 통해 비교하고 분석하였다.
```

![유도무기장치](.\Pictures\유도무기장치.PNG)
유도조정장치는 기본적으로 항법, 유도, 조종, 구동, 4개의 핵심 모듈로 구성된다. 항법은 탄이 자신의 위치나 자세를 알아내는 행위이다.
유도는 항법정보와 표적정보를 이용하여 탄이 표적까지 날아가기 위해 필요한 탄의 자세나 횡 가속도를 계산해내는 행위이다.
조종 알고리즘은 유도 알고리즘이 계산해 준 유도명령에 따라 탄이 움직일 수 있도록 조종날개를 얼마나 움직여야 하는지를 계산한다. 마지막으로 구동장치는 조종 알고리즘이 계산해준 구동명령에 따라 조정 날개가 움직일 수 있도록 구동장치의 제어 수단인 전기식 모터를 제어한다. 





<img src=".\Pictures\비례항법유도.PNG" alt="비례항법유도" style="zoom:50%;" />



ㅌ

















### 사이트

https://blog.nullbus.net/84?category=514672 (UI) -> 미사일

https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=woorikangsan&logNo=20144346365 <- 미사일 종류





https://onnons.tistory.com/133 <-최적제어

LQG에 대해서 알아야 한다. 칼만필터 + 최적제어



Autopilot design for agile missiles via output redefinition = 출력재정의를 통한 고기동 미사일의 자동 조종 장치 설계

-http://library.kaist.ac.kr/search/detail/view.do?bibCtrlNo=243558&flag=t



https://m.blog.naver.com/PostView.naver?isHttpsRedirect=true&blogId=lignex1&logNo=221265580806 <- 유도장치





